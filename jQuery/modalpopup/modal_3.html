<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    
    <script>
    $(function(){
       //장막이벤트내용
       var openPopUp = function(){
           
           blindFn();
           
           popMaker();
           $('.popup').show(1000);
        }
        
        function popMaker(){
            
            var tag = ""
            tag+='<div class="popup">';
            tag+='<button class="closebtn">닫기</button>';
            tag+='<div class="content">';
            tag+='</div>';
            tag+='</div>';
            
            $('body').append(tag);
            centerPosition($('.popup'));
        }
        
       
       function blindFn(){
           var bl_Tag = "";
           
           bl_Tag += '<div class="blind">';
           bl_Tag += '</div>';
           
           $('body').prepend(bl_Tag);
           
           //장막생성 스타일
           $('.blind').css({
               position:'absolute',
               backgroundColor:'#000',
               left:0,
               right:0,
               top:0,
               bottom:0,
               display:'none'
           }).fadeTo(1000,0.5);
       }
       
       function centerPosition(target){
           target.css({
               left:"50%",
               marginLeft:function(){
                   
                   var aa = $(this).css('width');
                   return -parseInt(aa)/2 + 'px';
                   
               },
               top:"50%",
               marginTop:function(){
                   
                   var aa = $(this).css('height');
                   return -parseInt(aa)/2 + 'px';
                   
               }
           })
           
       }
       
       //닫기
        var closeEvent = function(){
            //$('.blind').remove();
            $('.popup').hide();
            $('.blind').fadeOut(1000,function(){
                $(this).remove()
            })
        }
       
       //클릭이벤트 장막
        $('.open').click(openPopUp);
        $('body').on('click','.closebtn',closeEvent);
        // 바디안에 closebtn 을 클릭했을때, closeEvent를 실행해라.
        // 위에서부터 아래로 읽혀지기 때문에, 마크업 상에 없어도 찾아 들어간다.
        // 마크업상에 바디 위치에 부모요소에 넣으면 된다.(바디를 넣어도 되지만, 그럼 속도 느려져)
        // 1.4이후 on쓰고, 1.4이전 bind 사용
        
       
       
       
       
       
    });
    </script>
    <style>
        .popup{
            width:500px; height:500px; border:1px #F00 solid;
            background-color: #fff;
            position:absolute;
            top:0;
            left:0;
            z-index:1;
            display:none;
        }
        
    </style>
    
</head>
<body>
    
    <button class="open">열어</button>
    
    
    
    
</body>
</html>